---
title: Mapeamento espacial
description: Mapeamento espacial fornece uma representação detalhada das superfícies do mundo real no ambiente em torno do HoloLens.
author: mattzmsft
ms.author: mazeller
ms.date: 03/21/2018
ms.topic: article
keywords: mapeamento espacial, HoloLens, realidade mista, superfície reconstrução, malha, sr
ms.openlocfilehash: 31abeca624512f1d5e721dbe879ca2243cf41345
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/12/2019
ms.locfileid: "59591008"
---
# <a name="spatial-mapping"></a><span data-ttu-id="af3c5-104">Mapeamento espacial</span><span class="sxs-lookup"><span data-stu-id="af3c5-104">Spatial mapping</span></span>

<span data-ttu-id="af3c5-105">Mapeamento espacial fornece uma representação detalhada das superfícies do mundo real no ambiente em torno do HoloLens, permitindo que os desenvolvedores criem uma experiência de realidade misturada convincente.</span><span class="sxs-lookup"><span data-stu-id="af3c5-105">Spatial mapping provides a detailed representation of real-world surfaces in the environment around the HoloLens, allowing developers to create a convincing mixed reality experience.</span></span> <span data-ttu-id="af3c5-106">Mesclando o mundo real com o mundo virtual, um aplicativo pode fazer hologramas parecer real.</span><span class="sxs-lookup"><span data-stu-id="af3c5-106">By merging the real world with the virtual world, an application can make holograms seem real.</span></span> <span data-ttu-id="af3c5-107">Aplicativos também podem alinhar mais naturalmente com as expectativas dos usuários, fornecendo as interações e comportamentos familiares do mundo real.</span><span class="sxs-lookup"><span data-stu-id="af3c5-107">Applications can also more naturally align with user expectations by providing familiar real-world behaviors and interactions.</span></span>

<br>

>[!VIDEO https://www.youtube.com/embed/zff2aQ1RaVo]

## <a name="device-support"></a><span data-ttu-id="af3c5-108">Suporte a dispositivos</span><span class="sxs-lookup"><span data-stu-id="af3c5-108">Device support</span></span>

<table>
<tr>
<th><span data-ttu-id="af3c5-109">Recurso</span><span class="sxs-lookup"><span data-stu-id="af3c5-109">Feature</span></span></th><th style="width:150px"> <span data-ttu-id="af3c5-110"><a href="hololens-hardware-details.md">HoloLens (1ª geração)</a></span><span class="sxs-lookup"><span data-stu-id="af3c5-110"><a href="hololens-hardware-details.md">HoloLens (1st gen)</a></span></span></th><th style="width:150px"><span data-ttu-id="af3c5-111">HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="af3c5-111">HoloLens 2</span></span></th><th style="width:150px"> <span data-ttu-id="af3c5-112"><a href="immersive-headset-hardware-details.md">Fones imersivos em exposição</a></span><span class="sxs-lookup"><span data-stu-id="af3c5-112"><a href="immersive-headset-hardware-details.md">Immersive headsets</a></span></span></th>
</tr><tr>
<td> <span data-ttu-id="af3c5-113">Mapeamento espacial</span><span class="sxs-lookup"><span data-stu-id="af3c5-113">Spatial mapping</span></span></td><td style="text-align: center;"> <span data-ttu-id="af3c5-114">✔️</span><span class="sxs-lookup"><span data-stu-id="af3c5-114">✔️</span></span></td><td style="text-align: center;"> <span data-ttu-id="af3c5-115">✔️</span><span class="sxs-lookup"><span data-stu-id="af3c5-115">✔️</span></span></td><td style="text-align: center;"></td>
</tr>
</table>



## <a name="conceptual-overview"></a><span data-ttu-id="af3c5-116">Visão geral conceitual</span><span class="sxs-lookup"><span data-stu-id="af3c5-116">Conceptual overview</span></span>

<span data-ttu-id="af3c5-117">![As superfícies que abrangem uma sala de malha](images/SurfaceReconstruction.jpg)</span><span class="sxs-lookup"><span data-stu-id="af3c5-117">![Mesh surfaces covering a room](images/SurfaceReconstruction.jpg)</span></span><br>
<span data-ttu-id="af3c5-118">*Um exemplo de uma malha de mapeamento espacial que abrangem uma sala*</span><span class="sxs-lookup"><span data-stu-id="af3c5-118">*An example of a spatial mapping mesh covering a room*</span></span>

<span data-ttu-id="af3c5-119">Os dois tipos de objeto primário usados para mapeamento espacial são 'Observador de superfície espacial' e a 'superfície espacial'.</span><span class="sxs-lookup"><span data-stu-id="af3c5-119">The two primary object types used for spatial mapping are the 'Spatial Surface Observer' and the 'Spatial Surface'.</span></span>

<span data-ttu-id="af3c5-120">O aplicativo fornece o observador de superfície espacial com um ou mais volumes delimitadoras, para definir as regiões de espaço no qual o aplicativo deseja receber os dados de mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="af3c5-120">The application provides the Spatial Surface Observer with one or more bounding volumes, to define the regions of space in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="af3c5-121">Para cada um desses volumes, o mapeamento espacial fornecerá o aplicativo com um conjunto de superfícies espacial.</span><span class="sxs-lookup"><span data-stu-id="af3c5-121">For each of these volumes, spatial mapping will provide the application with a set of Spatial Surfaces.</span></span>

<span data-ttu-id="af3c5-122">Esses volumes podem ser estáticos (em um local fixo em relação ao mundo real) ou eles podem ser anexados para o HoloLens (eles movem, mas não giram, com o HoloLens enquanto se movimentam através do ambiente).</span><span class="sxs-lookup"><span data-stu-id="af3c5-122">These volumes may be stationary (in a fixed location with respect to the real world) or they may be attached to the HoloLens (they move, but do not rotate, with the HoloLens as it moves through the environment).</span></span> <span data-ttu-id="af3c5-123">Cada superfície espacial descreve as superfícies do mundo real em um pequeno volume de espaço, representado como uma malha de triângulos anexada a um mundo bloqueada [sistema de coordenadas espacial](coordinate-systems.md).</span><span class="sxs-lookup"><span data-stu-id="af3c5-123">Each spatial surface describes real-world surfaces in a small volume of space, represented as a triangle mesh attached to a world-locked [spatial coordinate system](coordinate-systems.md).</span></span>

<span data-ttu-id="af3c5-124">Como o HoloLens coletam novos dados sobre o ambiente e quando ocorrem alterações no ambiente, superfícies espaciais aparecerá, desaparecem e alterar.</span><span class="sxs-lookup"><span data-stu-id="af3c5-124">As the HoloLens gathers new data about the environment, and as changes to the environment occur, spatial surfaces will appear, disappear and change.</span></span>

## <a name="common-usage-scenarios"></a><span data-ttu-id="af3c5-125">Cenários de uso comuns</span><span class="sxs-lookup"><span data-stu-id="af3c5-125">Common usage scenarios</span></span>

![Ilustrações de cenários de uso comuns do mapeamento espacial: Posicionamento, oclusão, física e navegação](images/sm-concepts-1000px.png)

### <a name="placement"></a><span data-ttu-id="af3c5-127">Colocação</span><span class="sxs-lookup"><span data-stu-id="af3c5-127">Placement</span></span>

<span data-ttu-id="af3c5-128">Mapeamento espacial fornece aplicativos com a oportunidade de apresentar formas naturais e familiares de interação ao usuário; o que poderia ser mais natural do que colocar seu telefone para baixo sobre a mesa?</span><span class="sxs-lookup"><span data-stu-id="af3c5-128">Spatial mapping provides applications with the opportunity to present natural and familiar forms of interaction to the user; what could be more natural than placing your phone down on the desk?</span></span>

<span data-ttu-id="af3c5-129">Restringir o posicionamento de hologramas (ou de modo geral, qualquer seleção de locais espaciais) para ficar em superfícies fornece um mapeamento natural de 3D (ponto no espaço) para 2D (ponto na superfície).</span><span class="sxs-lookup"><span data-stu-id="af3c5-129">Constraining the placement of holograms (or more generally, any selection of spatial locations) to lie on surfaces provides a natural mapping from 3D (point in space) to 2D (point on surface).</span></span> <span data-ttu-id="af3c5-130">Isso reduz a quantidade de informações que o usuário precisa fornecer para o aplicativo e, portanto, torna as interações do usuário mais rápida, fácil e mais preciso.</span><span class="sxs-lookup"><span data-stu-id="af3c5-130">This reduces the amount of information the user needs to provide to the application and thus makes the user's interactions faster, easier and more precise.</span></span> <span data-ttu-id="af3c5-131">Isso é especialmente verdadeiro porque 'distância' não é algo que usamos fisicamente comunicando-se a outras pessoas ou computadores.</span><span class="sxs-lookup"><span data-stu-id="af3c5-131">This is particularly true because 'distance away' is not something that we are used to physically communicating to other people or to computers.</span></span> <span data-ttu-id="af3c5-132">Quando podemos apontar com nosso dedo, estamos especificando uma direção, mas não uma distância.</span><span class="sxs-lookup"><span data-stu-id="af3c5-132">When we point with our finger, we are specifying a direction but not a distance.</span></span>

<span data-ttu-id="af3c5-133">Uma limitação importante aqui é que, quando um aplicativo infere a distância da direção (por exemplo, executando um raycast ao longo da direção de olhar do usuário para localizar mais próximo superfície espacial), isso deverá produzir resultados que o usuário é capaz de prever com confiança.</span><span class="sxs-lookup"><span data-stu-id="af3c5-133">An important caveat here is that when an application infers distance from direction (for example by performing a raycast along the user's gaze direction to find the nearest spatial surface), this must yield results that the user is able to reliably predict.</span></span> <span data-ttu-id="af3c5-134">Caso contrário, o usuário perderá seu senso de controle, e isso pode rapidamente se tornar frustrante.</span><span class="sxs-lookup"><span data-stu-id="af3c5-134">Otherwise, the user will lose their sense of control and this can quickly become frustrating.</span></span> <span data-ttu-id="af3c5-135">Um método que ajuda com isso é executar vários raycasts em vez de apenas um.</span><span class="sxs-lookup"><span data-stu-id="af3c5-135">One method that helps with this is to perform multiple raycasts instead of just one.</span></span> <span data-ttu-id="af3c5-136">Os resultados de agregação devem ser mais suave e mais previsível, menos suscetíveis a influenciar dos resultados de 'exceções' transitório (como pode ser causado por raios passando buracos pequenos ou atingindo pequenos pedaços de geometria que o usuário não está ciente do).</span><span class="sxs-lookup"><span data-stu-id="af3c5-136">The aggregate results should be smoother and more predictable, less susceptible to influence from transient 'outlier' results (as can be caused by rays passing through tiny holes or hitting small bits of geometry that the user is not aware of).</span></span> <span data-ttu-id="af3c5-137">Agregação ou Suavização também pode ser executada ao longo do tempo; Por exemplo, você pode limitar a velocidade máxima na qual um holograma pode variar em termos de distância do usuário.</span><span class="sxs-lookup"><span data-stu-id="af3c5-137">Aggregation or smoothing can also be performed over time; for example you can limit the maximum speed at which a hologram can vary in distance from the user.</span></span> <span data-ttu-id="af3c5-138">Também pode ajudar apenas limitando o valor de distância mínima e máxima, portanto, o holograma que está sendo movido não, de repente, distância voar na distância ou vêm falhando volta para a face do usuário.</span><span class="sxs-lookup"><span data-stu-id="af3c5-138">Simply limiting the minimum and maximum distance value can also help, so the hologram being moved does not suddenly fly away into the distance or come crashing back into the user's face.</span></span>

<span data-ttu-id="af3c5-139">Aplicativos também podem usar a forma e a direção de superfícies de posicionamento de holograma de guia.</span><span class="sxs-lookup"><span data-stu-id="af3c5-139">Applications can also use the shape and direction of surfaces to guide hologram placement.</span></span> <span data-ttu-id="af3c5-140">Uma cadeira holográfica não deve invadir por meio de paredes e deve estar liberação com o chão, mesmo se ele está ligeiramente irregular.</span><span class="sxs-lookup"><span data-stu-id="af3c5-140">A holographic chair should not penetrate through walls and should sit flush with the floor even if it is slightly uneven.</span></span> <span data-ttu-id="af3c5-141">Esse tipo de funcionalidade seria provavelmente contam com o uso de colisões de física, em vez de apenas raycasts, preocupações semelhantes porém serão aplicada.</span><span class="sxs-lookup"><span data-stu-id="af3c5-141">This kind of functionality would likely rely upon the use of physics collisions rather than just raycasts, however similar concerns will apply.</span></span> <span data-ttu-id="af3c5-142">Se o holograma que está sendo colocado tem vários polígonos pequeno protuberantes, como os segmentos em um cadeira, talvez faça sentido para expandir a representação física desses polígonos para algo mais amplo e mais suave, para que fiquem mais pode deslizar ao longo de superfícies espaciais sem Realce em captura.</span><span class="sxs-lookup"><span data-stu-id="af3c5-142">If the hologram being placed has many small polygons that stick out, like the legs on a chair, it may make sense to expand the physics representation of those polygons to something wider and smoother so that they are more able to slide over spatial surfaces without snagging.</span></span>

<span data-ttu-id="af3c5-143">No extremo, entrada do usuário pode ser simplificada distância inteiramente e superfícies espaciais podem ser usadas para executar o posicionamento de holograma totalmente automáticas.</span><span class="sxs-lookup"><span data-stu-id="af3c5-143">At its extreme, user input can be simplified away entirely and spatial surfaces can be used to perform entirely automatic hologram placement.</span></span> <span data-ttu-id="af3c5-144">Por exemplo, o aplicativo pode colocar um comutador de luz holográfico em algum lugar na parede para o usuário pressione.</span><span class="sxs-lookup"><span data-stu-id="af3c5-144">For example, the application could place a holographic light-switch somewhere on the wall for the user to press.</span></span> <span data-ttu-id="af3c5-145">A mesma advertência sobre previsibilidade aplica duplamente aqui; Se o usuário espera que o controle sobre o posicionamento de holograma, mas o aplicativo não sempre coloca hologramas onde eles esperam (se a opção de luz aparece em algum lugar que o usuário não conseguir acessar), isso será uma experiência frustrante.</span><span class="sxs-lookup"><span data-stu-id="af3c5-145">The same caveat about predictability applies doubly here; if the user expects control over hologram placement, but the application does not always place holograms where they expect (if the light-switch appears somewhere that the user cannot reach), then this will be a frustrating experience.</span></span> <span data-ttu-id="af3c5-146">Ele pode ser, na verdade, pior executar o posicionamento automático que requer correção de usuário parte do tempo, que ao exigem apenas o usuário execute sempre posicionamento em si; como é o posicionamento automático bem-sucedida *esperado*, correção manual parece um fardo!</span><span class="sxs-lookup"><span data-stu-id="af3c5-146">It can actually be worse to perform automatic placement that requires user correction some of the time, than to just require the user to always perform placement themselves; because successful automatic placement is *expected*, manual correction feels like a burden!</span></span>

<span data-ttu-id="af3c5-147">Observe também que, a capacidade de um aplicativo para usar superfícies espaciais para posicionamento depende intensamente do aplicativo [experiência de verificação](spatial-mapping-design.md#the-environment-scanning-experience).</span><span class="sxs-lookup"><span data-stu-id="af3c5-147">Note also that the ability of an application to use spatial surfaces for placement depends heavily on the application's [scanning experience](spatial-mapping-design.md#the-environment-scanning-experience).</span></span> <span data-ttu-id="af3c5-148">Se uma superfície não foi examinada, ele não pode ser usado para posicionamento.</span><span class="sxs-lookup"><span data-stu-id="af3c5-148">If a surface has not been scanned, then it cannot be used for placement.</span></span> <span data-ttu-id="af3c5-149">É responsabilidade do aplicativo para tornar isso claro para o usuário, para que eles também podem ajudar a verificar novas superfícies ou selecione um novo local.</span><span class="sxs-lookup"><span data-stu-id="af3c5-149">It is up to the application to make this clear to the user, so that they can either help scan new surfaces or select a new location.</span></span>

<span data-ttu-id="af3c5-150">Os comentários visuais para o usuário são de suma importância durante o posicionamento.</span><span class="sxs-lookup"><span data-stu-id="af3c5-150">Visual feedback to the user is of paramount importance during placement.</span></span> <span data-ttu-id="af3c5-151">O usuário precisa saber onde o holograma é em relação à superfície mais próxima com [efeitos de aterramento](spatial-mapping.md#visualization).</span><span class="sxs-lookup"><span data-stu-id="af3c5-151">The user needs to know where the hologram is in relation to the nearest surface with [grounding effects](spatial-mapping.md#visualization).</span></span> <span data-ttu-id="af3c5-152">Eles devem entender por que a movimentação de seu holograma está sendo restrito (por exemplo, devido a conflito com outra mais próxima de superfície).</span><span class="sxs-lookup"><span data-stu-id="af3c5-152">They should understand why the movement of their hologram is being constrained (for example, due to collision with another nearby surface).</span></span> <span data-ttu-id="af3c5-153">Se eles não é possível colocar um holograma no local atual, em seguida, comentários visuais devem esclarecer por que não.</span><span class="sxs-lookup"><span data-stu-id="af3c5-153">If they cannot place a hologram in the current location, then visual feedback should make it clear why not.</span></span> <span data-ttu-id="af3c5-154">Por exemplo, se o usuário está tentando colocar um sofá holográfico fica preso metade no mural, em seguida, as partes do sofá que estão atrás de parede devem pulsate em uma cor irritada.</span><span class="sxs-lookup"><span data-stu-id="af3c5-154">For example, if the user is trying to place a holographic couch stuck half-way into the wall, then the portions of the couch that are behind the wall should pulsate in an angry color.</span></span> <span data-ttu-id="af3c5-155">Ou, por outro lado, se o aplicativo não conseguir encontrar uma superfície espacial em um local em que o usuário pode ver uma superfície do mundo real, em seguida, o aplicativo deve tornar isso claro.</span><span class="sxs-lookup"><span data-stu-id="af3c5-155">Or conversely, if the application cannot find a spatial surface in a location where the user can see a real-world surface, then the application should make this clear.</span></span> <span data-ttu-id="af3c5-156">A ausência evidente de um efeito de aterramento nessa área pode alcançar esse propósito.</span><span class="sxs-lookup"><span data-stu-id="af3c5-156">The obvious absence of a grounding effect in this area may achieve this purpose.</span></span>

### <a name="occlusion"></a><span data-ttu-id="af3c5-157">Oclusão</span><span class="sxs-lookup"><span data-stu-id="af3c5-157">Occlusion</span></span>

<span data-ttu-id="af3c5-158">Um dos principais usos de superfícies de mapeamento espacial é simplesmente occlude hologramas.</span><span class="sxs-lookup"><span data-stu-id="af3c5-158">One of the primary uses of spatial mapping surfaces is simply to occlude holograms.</span></span> <span data-ttu-id="af3c5-159">Esse comportamento simple tem um grande impacto sobre o realismo percebido de hologramas, ajudando a criar um senso visceral que habitam realmente o mesmo espaço físico que o usuário.</span><span class="sxs-lookup"><span data-stu-id="af3c5-159">This simple behavior has a huge impact on the perceived realism of holograms, helping to create a visceral sense that really inhabit the same physical space as the user.</span></span>

<span data-ttu-id="af3c5-160">Oclusão também fornece informações para o usuário; Quando um holograma parece ser obstruídos por uma superfície do mundo real, isso fornece comentários visuais adicionais sobre o local espacial do que holograma no mundo.</span><span class="sxs-lookup"><span data-stu-id="af3c5-160">Occlusion also provides information to the user; when a hologram appears to be occluded by a real-world surface, this provides additional visual feedback as to the spatial location of that hologram in the world.</span></span> <span data-ttu-id="af3c5-161">Por outro lado, oclusão pode também utilmente *ocultar* informações do usuário; occluding hologramas atrás paredes pode reduzir a desordem visual de maneira intuitiva.</span><span class="sxs-lookup"><span data-stu-id="af3c5-161">Conversely, occlusion can also usefully *hide* information from the user; occluding holograms behind walls can reduce visual clutter in an intuitive way.</span></span> <span data-ttu-id="af3c5-162">Para ocultar ou revelar um holograma, o usuário simplesmente precisa mover suas cabeças.</span><span class="sxs-lookup"><span data-stu-id="af3c5-162">To hide or reveal a hologram, the user merely has to move their head.</span></span>

<span data-ttu-id="af3c5-163">Oclusão também pode ser usado para preparar as expectativas para uma interface de usuário naturais com base em interações físicas familiares; Se um holograma é obstruído por uma superfície é porque essa superfície sólida, portanto, o usuário deve esperar que o holograma serão *colidem* com essa superfície e não simplesmente passam por ela.</span><span class="sxs-lookup"><span data-stu-id="af3c5-163">Occlusion can also be used to prime expectations for a natural user interface based upon familiar physical interactions; if a hologram is occluded by a surface it is because that surface is solid, so the user should expect that the hologram will *collide* with that surface and not simply pass through it.</span></span>

<span data-ttu-id="af3c5-164">Às vezes, oclusão de hologramas é indesejável.</span><span class="sxs-lookup"><span data-stu-id="af3c5-164">Sometimes, occlusion of holograms is undesirable.</span></span> <span data-ttu-id="af3c5-165">Se um usuário precisa ser capaz de interagir com um holograma, eles precisam conseguir vê-lo – mesmo se ele estiver atrás de uma superfície do mundo real.</span><span class="sxs-lookup"><span data-stu-id="af3c5-165">If a user needs to be able to interact with a hologram, then they need to be able to see it - even if it is behind a real-world surface.</span></span> <span data-ttu-id="af3c5-166">Nesses casos, geralmente faz sentido para renderizar tal holograma um forma diferente quando ele é obstruído (por exemplo, reduzindo seu brilho).</span><span class="sxs-lookup"><span data-stu-id="af3c5-166">In such cases, it usually makes sense to render such a hologram differently when it is occluded (for example, by reducing its brightness).</span></span> <span data-ttu-id="af3c5-167">Dessa forma, o usuário será capaz de localizar visualmente o holograma, mas ainda estará cientes de que ele está protegido por algo.</span><span class="sxs-lookup"><span data-stu-id="af3c5-167">This way, the user will be able to visually locate the hologram, but they will still be aware that it is behind something.</span></span>

### <a name="physics"></a><span data-ttu-id="af3c5-168">Física</span><span class="sxs-lookup"><span data-stu-id="af3c5-168">Physics</span></span>

<span data-ttu-id="af3c5-169">O uso de simulação de física é outra maneira quais mapeamento espacial pode ser usado para reforçar os *presença* de hologramas em um espaço físico do usuário.</span><span class="sxs-lookup"><span data-stu-id="af3c5-169">The use of physics simulation is another way in which spatial mapping can be used to reinforce the *presence* of holograms in the user's physical space.</span></span> <span data-ttu-id="af3c5-170">Quando meu bola de borracha holográfica realisticamente efetua logoff minha mesa, bounces entre o piso e desaparece no sofá, talvez seja difícil para mim acreditar que não é realmente existe.</span><span class="sxs-lookup"><span data-stu-id="af3c5-170">When my holographic rubber ball rolls realistically off my desk, bounces across the floor and disappears under the couch, it might be hard for me to believe that it's not really there.</span></span>

<span data-ttu-id="af3c5-171">Simulação de física também fornece a oportunidade para um aplicativo para usar naturais e familiares de interações baseadas em física.</span><span class="sxs-lookup"><span data-stu-id="af3c5-171">Physics simulation also provides the opportunity for an application to use natural and familiar physics-based interactions.</span></span> <span data-ttu-id="af3c5-172">Mover uma parte do holográfica móveis ao redor no chão provavelmente será mais fácil para o usuário se os móveis responde como se ele foram deslizante entre o piso com a inércia apropriada e atrito.</span><span class="sxs-lookup"><span data-stu-id="af3c5-172">Moving a piece of holographic furniture around on the floor will likely be easier for the user if the furniture responds as if it were sliding across the floor with the appropriate inertia and friction.</span></span>

<span data-ttu-id="af3c5-173">Para gerar comportamentos físicos realistas, você provavelmente precisará executar algumas [processamento de malha](spatial-mapping.md#mesh-processing) , como preenchimento de brechas, removendo flutuante hallucinations e suavização aproximado superfícies.</span><span class="sxs-lookup"><span data-stu-id="af3c5-173">In order to generate realistic physical behaviors, you will likely need to perform some [mesh processing](spatial-mapping.md#mesh-processing) such as filling holes, removing floating hallucinations and smoothing rough surfaces.</span></span>

<span data-ttu-id="af3c5-174">Você também precisa considerar como seu aplicativo [experiência de verificação](spatial-mapping-design.md#the-environment-scanning-experience) influencia seu simulação de física.</span><span class="sxs-lookup"><span data-stu-id="af3c5-174">You will also need to consider how your application's [scanning experience](spatial-mapping-design.md#the-environment-scanning-experience) influences its physics simulation.</span></span> <span data-ttu-id="af3c5-175">Em primeiro lugar, falta superfícies não entrem em conflito com qualquer coisa; o que acontece quando a bola de borracha efetua logoff para baixo a caminhar e após o fim do mundo conhecido?</span><span class="sxs-lookup"><span data-stu-id="af3c5-175">Firstly, missing surfaces won't collide with anything; what happens when the rubber ball rolls off down the corridor and off the end of the known world?</span></span> <span data-ttu-id="af3c5-176">Em segundo lugar, você precisa decidir se você continuará a responder a alterações no ambiente ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="af3c5-176">Secondly, you need to decide whether you will continue to respond to changes in the environment over time.</span></span> <span data-ttu-id="af3c5-177">Em alguns casos, convém responder mais rapidamente possível; Digamos que se o usuário está usando as portas e móveis como barricades Movível na defesa contra um tempest setas Roman entrada.</span><span class="sxs-lookup"><span data-stu-id="af3c5-177">In some cases, you will want to respond as quickly as possible; say if the user is using doors and furniture as movable barricades in defense against a tempest of incoming Roman arrows.</span></span> <span data-ttu-id="af3c5-178">Em outros casos, você pode querer ignorar novas atualizações; orientando seu carro esportivo holographic em torno da pista em suas instalações, de repente, não pode ser muito divertida se seu cachorro decide ficam no meio da faixa.</span><span class="sxs-lookup"><span data-stu-id="af3c5-178">In other cases though, you may want to ignore new updates; driving your holographic sports car around the racetrack on your floor may suddenly not be so fun if your dog decides to sit in the middle of the track.</span></span>

### <a name="navigation"></a><span data-ttu-id="af3c5-179">Navegação</span><span class="sxs-lookup"><span data-stu-id="af3c5-179">Navigation</span></span>

<span data-ttu-id="af3c5-180">Aplicativos podem usar dados de mapeamento espacial conceder holográfica caracteres (ou agentes) a capacidade de navegar do mundo real da mesma forma que seria uma pessoa real.</span><span class="sxs-lookup"><span data-stu-id="af3c5-180">Applications can use spatial mapping data to grant holographic characters (or agents) the ability to navigate the real world in the same way a real person would.</span></span> <span data-ttu-id="af3c5-181">Isso pode ajudar a reforçar a presença de caracteres holográfica, restringindo-os para o mesmo conjunto de comportamentos naturais e familiares, como aquelas do usuário e seus amigos.</span><span class="sxs-lookup"><span data-stu-id="af3c5-181">This can help reinforce the presence of holographic characters by restricting them to the same set of natural, familiar behaviors as those of the user and their friends.</span></span>

<span data-ttu-id="af3c5-182">Recursos de navegação pode ser útil para os usuários também.</span><span class="sxs-lookup"><span data-stu-id="af3c5-182">Navigation capabilities could be useful to users as well.</span></span> <span data-ttu-id="af3c5-183">Após a criação de um mapa de navegação em uma determinada área, ele poderia ser compartilhado para fornecer instruções holographic para novos usuários desconhecidos nesse local.</span><span class="sxs-lookup"><span data-stu-id="af3c5-183">Once a navigation map has been built in a given area, it could be shared to provide holographic directions for new users unfamiliar with that location.</span></span> <span data-ttu-id="af3c5-184">Este mapa pode ser criado para ajudar a manter um 'tráfego' fluindo sem problemas, ou para evitar acidentes em locais perigosas, como sites de construção.</span><span class="sxs-lookup"><span data-stu-id="af3c5-184">This map could be designed to help keep pedestrian 'traffic' flowing smoothly, or to avoid accidents in dangerous locations like construction sites.</span></span>

<span data-ttu-id="af3c5-185">Os principais desafios técnicos envolvidos na implementação de funcionalidade de navegação será confiável detecção de superfícies ser examinável (os seres humanos não guiá-lo no tabelas!) e normal adaptação a alterações no ambiente (os seres humanos não percorrer portas fechadas!).</span><span class="sxs-lookup"><span data-stu-id="af3c5-185">The key technical challenges involved in implementing navigation functionality will be reliable detection of walkable surfaces (humans don't walk on tables!) and graceful adaptation to changes in the environment (humans don't walk through closed doors!).</span></span> <span data-ttu-id="af3c5-186">A malha pode exigir algumas [processamento](spatial-mapping.md#mesh-processing) antes de ser usado para o planejamento de caminho e a navegação por um caractere virtual.</span><span class="sxs-lookup"><span data-stu-id="af3c5-186">The mesh may require some [processing](spatial-mapping.md#mesh-processing) before it is usable for path-planning and navigation by a virtual character.</span></span> <span data-ttu-id="af3c5-187">Suavização de malha e removendo hallucinations podem ajudar a evitar caracteres se tornando paralisadas.</span><span class="sxs-lookup"><span data-stu-id="af3c5-187">Smoothing the mesh and removing hallucinations may help avoid characters becoming stuck.</span></span> <span data-ttu-id="af3c5-188">Você também poderá simplificar drasticamente a malha para acelerar o planejamento de caminho do seu caractere e cálculos de navegação.</span><span class="sxs-lookup"><span data-stu-id="af3c5-188">You may also wish to drastically simplify the mesh in order to speed up your character's path-planning and navigation calculations.</span></span> <span data-ttu-id="af3c5-189">Esses desafios receberam uma grande quantidade de atenção no desenvolvimento de tecnologia de videogame e há uma grande quantidade de literatura de pesquisa disponíveis sobre esses tópicos.</span><span class="sxs-lookup"><span data-stu-id="af3c5-189">These challenges have received a great deal of attention in the development of videogame technology, and there is a wealth of available research literature on these topics.</span></span>

<span data-ttu-id="af3c5-190">Observe que a funcionalidade interna de NavMesh no Unity não pode ser usada com as superfícies de mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="af3c5-190">Note that the built-in NavMesh functionality in Unity cannot be used with spatial mapping surfaces.</span></span> <span data-ttu-id="af3c5-191">Isso ocorre porque as superfícies de mapeamento espacial não são conhecidas até que o aplicativo é iniciado, enquanto NavMesh os arquivos de dados precisam ser gerados a partir de ativos de código-fonte antes do tempo.</span><span class="sxs-lookup"><span data-stu-id="af3c5-191">This is because spatial mapping surfaces are not known until the application starts, whereas NavMesh data files need to be generated from source assets ahead of time.</span></span> <span data-ttu-id="af3c5-192">Observe também que, o sistema de mapeamento espacial não fornecerá [informações sobre as superfícies muito longe](spatial-mapping-design.md#the-environment-scanning-experience) do local atual do usuário.</span><span class="sxs-lookup"><span data-stu-id="af3c5-192">Also note that, the spatial mapping system will not provide [information about surfaces very far away](spatial-mapping-design.md#the-environment-scanning-experience) from the user's current location.</span></span> <span data-ttu-id="af3c5-193">Portanto, o aplicativo deve 'Lembre-se' superfícies em si se é criar um mapa de uma área muito grande.</span><span class="sxs-lookup"><span data-stu-id="af3c5-193">So the application must 'remember' surfaces itself if it is to build a map of a very large area.</span></span>

### <a name="visualization"></a><span data-ttu-id="af3c5-194">Visualização</span><span class="sxs-lookup"><span data-stu-id="af3c5-194">Visualization</span></span>

<span data-ttu-id="af3c5-195">Na maioria das vezes, ela é adequada para superfícies espaciais seja invisível; para minimizar a desordem visual e permitir que o real world falarem por si mesmo.</span><span class="sxs-lookup"><span data-stu-id="af3c5-195">Most of the time it is appropriate for spatial surfaces to be invisible; to minimize visual clutter and let the real world speak for itself.</span></span> <span data-ttu-id="af3c5-196">No entanto, às vezes é útil visualizar as superfícies de mapeamento espacial diretamente, apesar do fato de que suas contrapartes do mundo real já estão visíveis.</span><span class="sxs-lookup"><span data-stu-id="af3c5-196">However, sometimes it is useful to visualize spatial mapping surfaces directly, despite the fact that their real-world counterparts are already visible.</span></span>

<span data-ttu-id="af3c5-197">Por exemplo, quando o usuário está tentando colocar um holograma em uma superfície (colocando um gabinete holográfico no mural, digamos) pode ser útil ' Terra ' o holograma convertendo uma sombra para a superfície.</span><span class="sxs-lookup"><span data-stu-id="af3c5-197">For example, when the user is trying to place a hologram onto a surface (placing a holographic cabinet on the wall, say) it can be useful to 'ground' the hologram by casting a shadow onto the surface.</span></span> <span data-ttu-id="af3c5-198">Isso fornece ao usuário um senso muito mais claro de proximidade física exata entre o holograma e a superfície.</span><span class="sxs-lookup"><span data-stu-id="af3c5-198">This gives the user a much clearer sense of the exact physical proximity between the hologram and the surface.</span></span> <span data-ttu-id="af3c5-199">Isso também é um exemplo de como a prática mais geral de visualmente 'Visualizar' uma alteração antes do usuário confirma a ele.</span><span class="sxs-lookup"><span data-stu-id="af3c5-199">This is also an example of the more general practice of visually 'previewing' a change before the user commits to it.</span></span>

<span data-ttu-id="af3c5-200">Visualizando superfícies, o aplicativo pode compartilhar com o usuário sua compreensão do ambiente.</span><span class="sxs-lookup"><span data-stu-id="af3c5-200">By visualizing surfaces, the application can share with the user its understanding of the environment.</span></span> <span data-ttu-id="af3c5-201">Por exemplo, um jogo de tabuleiro holográfico pudesse visualizar as superfícies horizontais que ela identificou como 'tabelas', para que o usuário saiba onde eles devem ir para interagir.</span><span class="sxs-lookup"><span data-stu-id="af3c5-201">For example, a holographic board game could visualize the horizontal surfaces that it has identified as 'tables', so the user knows where they should go to interact.</span></span>

<span data-ttu-id="af3c5-202">Visualizar superfícies pode ser uma maneira útil para mostrar ao usuário nas proximidades de espaços que estão ocultos da exibição.</span><span class="sxs-lookup"><span data-stu-id="af3c5-202">Visualizing surfaces can be a useful way to show the user nearby spaces that are hidden from view.</span></span> <span data-ttu-id="af3c5-203">Isso poderá fornecer uma maneira simples de conceder o acesso de usuário a sua cozinha (e todos os seus hologramas independentes) na sua sala de estar.</span><span class="sxs-lookup"><span data-stu-id="af3c5-203">This could provide a simple way to give the user access to their kitchen (and all of its contained holograms) from their living room.</span></span>

<span data-ttu-id="af3c5-204">As malhas de superfície fornecidas pelo mapeamento espacial não podem ser particularmente 'limpas'.</span><span class="sxs-lookup"><span data-stu-id="af3c5-204">The surface meshes provided by spatial mapping may not be particularly 'clean'.</span></span> <span data-ttu-id="af3c5-205">Portanto, é importante para visualizá-las adequadamente.</span><span class="sxs-lookup"><span data-stu-id="af3c5-205">Thus it is important to visualize them appropriately.</span></span> <span data-ttu-id="af3c5-206">Cálculos de iluminação tradicional podem realçar erros em normais da superfície de uma maneira de distração Visual, enquanto 'limpas' texturas projetadas para a superfície podem ajudar a dar a ele uma aparência mais organizada.</span><span class="sxs-lookup"><span data-stu-id="af3c5-206">Traditional lighting calculations may highlight errors in surface normals in a visually distracting manner, whilst 'clean' textures projected onto the surface may help to give it a tidier appearance.</span></span> <span data-ttu-id="af3c5-207">Também é possível realizar [processamento de malha](spatial-mapping.md#mesh-processing) para melhorar a propriedades de malha, antes das superfícies são renderizadas.</span><span class="sxs-lookup"><span data-stu-id="af3c5-207">It is also possible to perform [mesh processing](spatial-mapping.md#mesh-processing) to improve mesh properties, before the surfaces are rendered.</span></span>

## <a name="using-the-surface-observer"></a><span data-ttu-id="af3c5-208">Usando o observador de superfície</span><span class="sxs-lookup"><span data-stu-id="af3c5-208">Using The Surface Observer</span></span>

<span data-ttu-id="af3c5-209">O ponto de partida para mapeamento espacial é o observador de superfície.</span><span class="sxs-lookup"><span data-stu-id="af3c5-209">The starting point for spatial mapping is the surface observer.</span></span> <span data-ttu-id="af3c5-210">Fluxo do programa é da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="af3c5-210">Program flow is as follows:</span></span>
* <span data-ttu-id="af3c5-211">Criar um objeto observador superfície</span><span class="sxs-lookup"><span data-stu-id="af3c5-211">Create a surface observer object</span></span>
   * <span data-ttu-id="af3c5-212">Forneça um ou mais volumes espaciais, para definir as regiões de interesse em que o aplicativo deseja receber os dados de mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="af3c5-212">Provide one or more spatial volumes, to define the regions of interest in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="af3c5-213">Um volume espacial é simplesmente uma forma de definir uma região do espaço, como uma esfera ou uma caixa.</span><span class="sxs-lookup"><span data-stu-id="af3c5-213">A spatial volume is simply a shape defining a region of space, such as a sphere or a box.</span></span>
   * <span data-ttu-id="af3c5-214">Use um volume espacial com um sistema de coordenadas espacial bloqueado pelo mundo para identificar uma região fixa do mundo físico.</span><span class="sxs-lookup"><span data-stu-id="af3c5-214">Use a spatial volume with a world-locked spatial coordinate system to identify a fixed region of the physical world.</span></span>
   * <span data-ttu-id="af3c5-215">Use um volume espacial, atualizado de cada quadro com um corpo bloqueada espacial sistema de coordenadas, para identificar uma região de espaço que move (mas não gira) com o usuário.</span><span class="sxs-lookup"><span data-stu-id="af3c5-215">Use a spatial volume, updated each frame with a body-locked spatial coordinate system, to identify a region of space that moves (but does not rotate) with the user.</span></span>
   * <span data-ttu-id="af3c5-216">Esses volumes espaciais podem ser alterados posteriormente a qualquer momento, como o status do aplicativo ou as alterações do usuário.</span><span class="sxs-lookup"><span data-stu-id="af3c5-216">These spatial volumes may be changed later at any time, as the status of the application or the user changes.</span></span>
* <span data-ttu-id="af3c5-217">Use sondagem ou notificação para recuperar informações sobre as superfícies espaciais</span><span class="sxs-lookup"><span data-stu-id="af3c5-217">Use polling or notification to retrieve information about spatial surfaces</span></span>
   * <span data-ttu-id="af3c5-218">Você pode 'sondar' o observador de superfície para o status de superfície espacial a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="af3c5-218">You may 'poll' the surface observer for spatial surface status at any time.</span></span> <span data-ttu-id="af3c5-219">Como alternativa, você pode se registrar para 'alterado de superfícies de' evento do observador superfície, que notificará o aplicativo quando superfícies espaciais foram alterados.</span><span class="sxs-lookup"><span data-stu-id="af3c5-219">Alternatively, you may register for the surface observer's 'surfaces changed' event, which will notify the application when spatial surfaces have changed.</span></span>
   * <span data-ttu-id="af3c5-220">Para um volume dinâmico espacial, como frustum o modo de exibição, ou um volume bloqueado de corpo, aplicativos precisam sondar alterações cada quadro, definindo a região de interesse e, em seguida, obter o conjunto atual de superfícies espaciais.</span><span class="sxs-lookup"><span data-stu-id="af3c5-220">For a dynamic spatial volume, such as the view frustum, or a body-locked volume, applications will need to poll for changes each frame by setting the region of interest and then obtaining the current set of spatial surfaces.</span></span>
   * <span data-ttu-id="af3c5-221">Para um volume estático, como um cubo bloqueado pelo mundo, que abrangem uma única sala, aplicativos podem se registrar para o evento 'alterado de superfícies' ser notificado quando superfícies espaciais dentro desse volume podem ter sido alterado.</span><span class="sxs-lookup"><span data-stu-id="af3c5-221">For a static volume, such as a world-locked cube covering a single room, applications may register for the 'surfaces changed' event to be notified when spatial surfaces inside that volume may have changed.</span></span>
* <span data-ttu-id="af3c5-222">Alterações de superfícies de processo</span><span class="sxs-lookup"><span data-stu-id="af3c5-222">Process surfaces changes</span></span>
   * <span data-ttu-id="af3c5-223">Itere o conjunto fornecido de superfícies espaciais.</span><span class="sxs-lookup"><span data-stu-id="af3c5-223">Iterate the provided set of spatial surfaces.</span></span>
   * <span data-ttu-id="af3c5-224">Classificar espaciais superfícies como adicionado, alterado ou removido.</span><span class="sxs-lookup"><span data-stu-id="af3c5-224">Classify spatial surfaces as added, changed or removed.</span></span>
   * <span data-ttu-id="af3c5-225">Para cada superfície espacial adicionado ou alterado, se apropriado, envie uma solicitação assíncrona para receber a malha atualizada que representa o estado atual de superfície no nível desejado de detalhes.</span><span class="sxs-lookup"><span data-stu-id="af3c5-225">For each added or changed spatial surface, if appropriate submit an asynchronous request to receive updated mesh representing the surface's current state at the desired level of detail.</span></span>
* <span data-ttu-id="af3c5-226">Processe a solicitação assíncrona de malha (mais detalhes nas seções a seguir).</span><span class="sxs-lookup"><span data-stu-id="af3c5-226">Process the asynchronous mesh request (more details in following sections).</span></span>

## <a name="mesh-caching"></a><span data-ttu-id="af3c5-227">Malha de armazenamento em cache</span><span class="sxs-lookup"><span data-stu-id="af3c5-227">Mesh Caching</span></span>

<span data-ttu-id="af3c5-228">Superfícies espaciais são representadas por malhas de triângulos densa.</span><span class="sxs-lookup"><span data-stu-id="af3c5-228">Spatial surfaces are represented by dense triangle meshes.</span></span> <span data-ttu-id="af3c5-229">Armazenar, renderizar e processar essas malhas podem consumir recursos significativos de computação e armazenamento.</span><span class="sxs-lookup"><span data-stu-id="af3c5-229">Storing, rendering and processing these meshes can consume significant computational and storage resources.</span></span> <span data-ttu-id="af3c5-230">Assim, cada aplicativo deve adotar uma malha de esquema apropriada às suas necessidades, para minimizar os recursos usados para processamento de malha e o armazenamento de cache.</span><span class="sxs-lookup"><span data-stu-id="af3c5-230">As such, each application should adopt a mesh caching scheme appropriate to its needs, in order to minimize the resources used for mesh processing and storage.</span></span> <span data-ttu-id="af3c5-231">Esse esquema deve determinar quais malhas para manter e qual descartar, bem como quando atualizar a malha para cada superfície espacial.</span><span class="sxs-lookup"><span data-stu-id="af3c5-231">This scheme should determine which meshes to retain and which to discard, as well as when to update the mesh for each spatial surface.</span></span>

<span data-ttu-id="af3c5-232">Muitas das considerações discutidas ali informará diretamente como o seu aplicativo deve abordar a malha de armazenamento em cache.</span><span class="sxs-lookup"><span data-stu-id="af3c5-232">Many of the considerations discussed there will directly inform how your application should approach mesh caching.</span></span> <span data-ttu-id="af3c5-233">Você deve considerar como o usuário se move através do ambiente, que cobrem é necessários, quando serão observadas diferentes superfícies e quando as alterações no ambiente devem ser capturadas.</span><span class="sxs-lookup"><span data-stu-id="af3c5-233">You should consider how the user moves through the environment, which surfaces are needed, when different surfaces will be observed and when changes in the environment should be captured.</span></span>

<span data-ttu-id="af3c5-234">Ao interpretar o evento 'alterado de superfícies' fornecido pelo observador superfície, a lógica de cache de malha básica é o seguinte:</span><span class="sxs-lookup"><span data-stu-id="af3c5-234">When interpreting the 'surfaces changed' event provided by the surface observer, the basic mesh caching logic is as follows:</span></span>
* <span data-ttu-id="af3c5-235">Se o aplicativo vê uma ID de superfície espacial que ele não tenha visto antes, ele deve tratar isso como uma nova superfície espacial.</span><span class="sxs-lookup"><span data-stu-id="af3c5-235">If the application sees a spatial surface ID that it has not seen before, it should treat this as a new spatial surface.</span></span>
* <span data-ttu-id="af3c5-236">Se o aplicativo vê uma superfície espacial com uma ID conhecida, mas com um novo tempo de atualização, ele deve tratar isso como uma superfície espacial atualizada.</span><span class="sxs-lookup"><span data-stu-id="af3c5-236">If the application sees a spatial surface with a known ID but with a new update time, it should treat this as an updated spatial surface.</span></span>
* <span data-ttu-id="af3c5-237">Se o aplicativo não vê uma superfície espacial com uma ID conhecida, ele deve tratar isso como uma superfície espacial removida.</span><span class="sxs-lookup"><span data-stu-id="af3c5-237">If the application no longer sees a spatial surface with a known ID, it should treat this as a removed spatial surface.</span></span>

<span data-ttu-id="af3c5-238">Cabe a cada aplicativo, em seguida, faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="af3c5-238">It is up to each application to then make the following choices:</span></span>
* <span data-ttu-id="af3c5-239">Para novas superfícies espaciais, a malha deve ser solicitada?</span><span class="sxs-lookup"><span data-stu-id="af3c5-239">For new spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="af3c5-240">Geralmente, malha deve ser solicitada imediatamente para novas superfícies espaciais, que podem fornecer informações úteis de novo para o usuário.</span><span class="sxs-lookup"><span data-stu-id="af3c5-240">Generally mesh should be requested immediately for new spatial surfaces, which may provide useful new information to the user.</span></span>
   * <span data-ttu-id="af3c5-241">No entanto, novas superfícies espaciais perto e na frente do usuário devem ser dada prioridade e sua malha deve ser solicitada pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="af3c5-241">However, new spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="af3c5-242">Se a nova malha não for necessário, se por exemplo o aplicativo tem permanente ou temporariamente "congelado' seu modelo do ambiente, em seguida, ele deve não ser solicitado.</span><span class="sxs-lookup"><span data-stu-id="af3c5-242">If the new mesh is not needed, if for example the application has permanently or temporarily 'frozen' its model of the environment, then it should not be requested.</span></span>
* <span data-ttu-id="af3c5-243">Para a superfície espacial atualizada, a malha deve ser solicitada?</span><span class="sxs-lookup"><span data-stu-id="af3c5-243">For updated spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="af3c5-244">Superfície espacial atualizada quase e na frente do usuário deve ser dada prioridade e sua malha deve ser solicitada pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="af3c5-244">Updated spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="af3c5-245">Ele também pode ser apropriado deem mais prioridade para novas superfícies que para atualizada superfícies, especialmente durante a experiência de verificação.</span><span class="sxs-lookup"><span data-stu-id="af3c5-245">It may also be appropriate to give higher priority to new surfaces than to updated surfaces, especially during the scanning experience.</span></span>
   * <span data-ttu-id="af3c5-246">Para limitar os custos de processamento, os aplicativos talvez queiram limitar a taxa em que eles processem as atualizações para superfícies espaciais.</span><span class="sxs-lookup"><span data-stu-id="af3c5-246">To limit processing costs, applications may wish to throttle the rate at which they process updates to spatial surfaces.</span></span>
   * <span data-ttu-id="af3c5-247">É possível inferir que as alterações a uma superfície espacial são pequenas, por exemplo, se os limites da superfície forem pequenos, caso em que a atualização pode não ser importante suficiente ao processo.</span><span class="sxs-lookup"><span data-stu-id="af3c5-247">It may be possible to infer that changes to a spatial surface are minor, for example if the bounds of the surface are small, in which case the update may not be important enough to process.</span></span>
   * <span data-ttu-id="af3c5-248">Atualizações para espaciais superfícies fora da região de interesse do usuário atual podem ser ignoradas totalmente, mesmo nesse caso, pode ser mais eficiente para modificar os volumes delimitadora espaciais usando o observador de superfície.</span><span class="sxs-lookup"><span data-stu-id="af3c5-248">Updates to spatial surfaces outside the current region of interest of the user may be ignored entirely, though in this case it may be more efficient to modify the spatial bounding volumes in use by the surface observer.</span></span>
* <span data-ttu-id="af3c5-249">Para superfícies espaciais removidas, a malha deve ser descartada?</span><span class="sxs-lookup"><span data-stu-id="af3c5-249">For removed spatial surfaces, should mesh be discarded?</span></span>
   * <span data-ttu-id="af3c5-250">Geralmente, malha deve ser descartada imediatamente para superfícies espaciais removidas, para que oclusão holograma permaneça correto.</span><span class="sxs-lookup"><span data-stu-id="af3c5-250">Generally mesh should be discarded immediately for removed spatial surfaces, so that hologram occlusion remains correct.</span></span>
   * <span data-ttu-id="af3c5-251">No entanto, se o aplicativo tiver motivos para acreditar que uma superfície espacial reaparecerá em breve (talvez com base no design da experiência do usuário), ele poderá ser mais eficiente para retê-lo que to descartar sua malha e recriá-lo novamente mais tarde.</span><span class="sxs-lookup"><span data-stu-id="af3c5-251">However, if the application has reason to believe that a spatial surface will reappear shortly (perhaps based upon the design of the user experience), then it may be more efficient to retain it than to discard its mesh and recreate it again later.</span></span>
   * <span data-ttu-id="af3c5-252">Se o aplicativo está criando um modelo em larga escala do ambiente do usuário, em seguida, ele não poderá descartar qualquer malhas em todos os.</span><span class="sxs-lookup"><span data-stu-id="af3c5-252">If the application is building a large-scale model of the user's environment then it may not wish to discard any meshes at all.</span></span> <span data-ttu-id="af3c5-253">Ele ainda será necessário limitar o uso de recursos, possivelmente por malhas de spool para disco conforme superfícies espaciais desaparecerem.</span><span class="sxs-lookup"><span data-stu-id="af3c5-253">It will still need to limit resource usage though, possibly by spooling meshes to disk as spatial surfaces disappear.</span></span>
   * <span data-ttu-id="af3c5-254">Observe que alguns eventos relativamente raros durante a geração de superfície espacial podem causar superfícies espaciais a ser substituído por novas superfícies espaciais em um local semelhante, mas com IDs diferentes.</span><span class="sxs-lookup"><span data-stu-id="af3c5-254">Note that some relatively rare events during spatial surface generation can cause spatial surfaces to be replaced by new spatial surfaces in a similar location but with different IDs.</span></span> <span data-ttu-id="af3c5-255">Consequentemente, os aplicativos que escolha não para descartar uma superfície removida devem ter cuidado não ao final backup com vários altamente sobreposta espaciais superfície malhas que abrangem o mesmo local.</span><span class="sxs-lookup"><span data-stu-id="af3c5-255">Consequently, applications that choose not to discard a removed surface should take care not to end up with multiple highly-overlapped spatial surface meshes covering the same location.</span></span>
* <span data-ttu-id="af3c5-256">Malha deve ser descartada para quaisquer outras superfícies espaciais?</span><span class="sxs-lookup"><span data-stu-id="af3c5-256">Should mesh be discarded for any other spatial surfaces?</span></span>
   * <span data-ttu-id="af3c5-257">Mesmo enquanto uma superfície espacial existe, se ele não é mais útil para a experiência do usuário e em seguida, ele deve ser descartado.</span><span class="sxs-lookup"><span data-stu-id="af3c5-257">Even while a spatial surface exists, if it is no longer useful to the user's experience then it should be discarded.</span></span> <span data-ttu-id="af3c5-258">Por exemplo, se o aplicativo 'substitui' sala no outro lado de uma porta de entrada com um espaço virtual alternativo, em seguida, as superfícies espaciais na sala não importam.</span><span class="sxs-lookup"><span data-stu-id="af3c5-258">For example, if the application 'replaces' the room on the other side of a doorway with an alternate virtual space then the spatial surfaces in that room no longer matter.</span></span>

<span data-ttu-id="af3c5-259">Aqui está uma exemplo malha estratégia de cache, usando Histerese espacial e temporal:</span><span class="sxs-lookup"><span data-stu-id="af3c5-259">Here is an example mesh caching strategy, using spatial and temporal hysteresis:</span></span>
* <span data-ttu-id="af3c5-260">Considere um aplicativo que deseja usar um volume espacial em forma de frustum de interesse que segue a olhar do usuário conforme eles olhar em volta e percorrer.</span><span class="sxs-lookup"><span data-stu-id="af3c5-260">Consider an application that wishes to use a frustum-shaped spatial volume of interest that follows the user's gaze as they look around and walk around.</span></span>
* <span data-ttu-id="af3c5-261">Uma superfície espacial pode desaparecer temporariamente este volume simplesmente porque o usuário procura longe a superfície ou etapas adicionais para longe dela... somente a olhar para trás ou aproxima novamente um momento posterior.</span><span class="sxs-lookup"><span data-stu-id="af3c5-261">A spatial surface may disappear temporarily from this volume simply because the user looks away from the surface or steps further away from it... only to look back or moves closer again a moment later.</span></span> <span data-ttu-id="af3c5-262">Nesse caso, descartando e recriando a malha para essa superfície representam muito processamento redundante.</span><span class="sxs-lookup"><span data-stu-id="af3c5-262">In this case, discarding and re-creating the mesh for this surface represents a lot of redundant processing.</span></span>
* <span data-ttu-id="af3c5-263">Para reduzir o número de alterações processadas, o aplicativo usa dois espaciais superfície observadores, um contido dentro do outro.</span><span class="sxs-lookup"><span data-stu-id="af3c5-263">To reduce the number of changes processed, the application uses two spatial surface observers, one contained within the other.</span></span> <span data-ttu-id="af3c5-264">O volume maior é Esférico e segue o usuário 'lentamente'; ele move somente quando necessário para garantir que seu centre esteja dentro do 2.0 metres do usuário.</span><span class="sxs-lookup"><span data-stu-id="af3c5-264">The larger volume is spherical and follows the user 'lazily'; it only moves when necessary to ensure that its centre is within 2.0 metres of the user.</span></span>
* <span data-ttu-id="af3c5-265">Malhas de superfície espaciais novas e atualizadas são sempre processadas do observador superfície interno menor, mas as malhas são armazenados em cache até que elas desaparecem o observador de superfície externo maior.</span><span class="sxs-lookup"><span data-stu-id="af3c5-265">New and updated spatial surface meshes are always processed from the smaller inner surface observer, but meshes are cached until they disappear from the larger outer surface observer.</span></span> <span data-ttu-id="af3c5-266">Isso permite que o aplicativo para evitar o processamento de muitas alterações redundantes devido à movimentação de usuário local.</span><span class="sxs-lookup"><span data-stu-id="af3c5-266">This allows the application to avoid processing many redundant changes due to local user movement.</span></span>
* <span data-ttu-id="af3c5-267">Uma vez que uma superfície espacial também pode desaparecer temporariamente devido a perda de controle, o aplicativo também adia a descarte superfícies espaciais removidas durante a perda de controle.</span><span class="sxs-lookup"><span data-stu-id="af3c5-267">Since a spatial surface may also disappear temporarily due to tracking loss, the application also defers discarding removed spatial surfaces during tracking loss.</span></span>
* <span data-ttu-id="af3c5-268">Em geral, um aplicativo deve avaliar a compensação entre o processamento de atualização reduzida e maior uso de memória para determinar sua estratégia de cache ideal.</span><span class="sxs-lookup"><span data-stu-id="af3c5-268">In general, an application should evaluate the tradeoff between reduced update processing and increased memory usage to determine its ideal caching strategy.</span></span>

## <a name="rendering"></a><span data-ttu-id="af3c5-269">Renderização</span><span class="sxs-lookup"><span data-stu-id="af3c5-269">Rendering</span></span>

<span data-ttu-id="af3c5-270">Há três maneiras principais em que as malhas de mapeamento espacial tendem a ser usada para renderização:</span><span class="sxs-lookup"><span data-stu-id="af3c5-270">There are three primary ways in which spatial mapping meshes tend to be used for rendering:</span></span>
* <span data-ttu-id="af3c5-271">Para visualização de superfície</span><span class="sxs-lookup"><span data-stu-id="af3c5-271">For surface visualization</span></span>
   * <span data-ttu-id="af3c5-272">Geralmente é útil visualizar as superfícies espaciais diretamente.</span><span class="sxs-lookup"><span data-stu-id="af3c5-272">It is often useful to visualize spatial surfaces directly.</span></span> <span data-ttu-id="af3c5-273">Por exemplo, conversão como 'shadows' dos objetos em superfícies espaciais podem fornecer comentários visuais úteis para o usuário enquanto eles estão colocando hologramas em superfícies.</span><span class="sxs-lookup"><span data-stu-id="af3c5-273">For example, casting 'shadows' from objects onto spatial surfaces can provide helpful visual feedback to the user while they are placing holograms on surfaces.</span></span>
   * <span data-ttu-id="af3c5-274">Uma coisa a se ter em mente é que as malhas espaciais são diferentes para o tipo de malhas que um artista 3D pode criar.</span><span class="sxs-lookup"><span data-stu-id="af3c5-274">One thing to bear in mind is that spatial meshes are different to the kind of meshes that a 3D artist might create.</span></span> <span data-ttu-id="af3c5-275">A topologia de triângulo não será tão 'limpa' como topologia criada por humanos e sofrerão a malha [vários erros](spatial-mapping-design.md#what-influences-spatial-mapping-quality).</span><span class="sxs-lookup"><span data-stu-id="af3c5-275">The triangle topology will not be as 'clean' as human-created topology, and the mesh will suffer from [various errors](spatial-mapping-design.md#what-influences-spatial-mapping-quality).</span></span>
   * <span data-ttu-id="af3c5-276">Para criar uma estética visual agradável, portanto, convém executar algumas [processamento de malha](spatial-mapping.md#mesh-processing), por exemplo, falhas de preenchimento ou normais da superfície suaves.</span><span class="sxs-lookup"><span data-stu-id="af3c5-276">In order to create a pleasing visual aesthetic, you may thus want to perform some [mesh processing](spatial-mapping.md#mesh-processing), for example to fill holes or smooth surface normals.</span></span> <span data-ttu-id="af3c5-277">Você também poderá usar um sombreador de texturas projetado por artista do projeto em sua malha, em vez de diretamente visualizando a topologia de malha e normais.</span><span class="sxs-lookup"><span data-stu-id="af3c5-277">You may also wish to use a shader to project artist-designed textures onto your mesh instead of directly visualizing mesh topology and normals.</span></span>
* <span data-ttu-id="af3c5-278">Para occluding hologramas por trás de superfícies do mundo real</span><span class="sxs-lookup"><span data-stu-id="af3c5-278">For occluding holograms behind real-world surfaces</span></span>
   * <span data-ttu-id="af3c5-279">Superfícies espaciais podem ser renderizadas em uma passagem somente de profundidade que afeta apenas o [buffer de profundidade](https://msdn.microsoft.com/library/windows/desktop/bb219616(v=vs.85).aspx) e não afeta os destinos de renderização de cor.</span><span class="sxs-lookup"><span data-stu-id="af3c5-279">Spatial surfaces can be rendered in a depth-only pass which only affects the [depth buffer](https://msdn.microsoft.com/library/windows/desktop/bb219616(v=vs.85).aspx) and does not affect color render targets.</span></span>
   * <span data-ttu-id="af3c5-280">Isso inicia o buffer de profundidade para occlude hologramas subsequentemente renderizados por trás de superfícies espaciais.</span><span class="sxs-lookup"><span data-stu-id="af3c5-280">This primes the depth buffer to occlude subsequently-rendered holograms behind spatial surfaces.</span></span> <span data-ttu-id="af3c5-281">Oclusão preciso de hologramas aprimora o sentido de que realmente existem hologramas dentro do espaço de física do usuário.</span><span class="sxs-lookup"><span data-stu-id="af3c5-281">Accurate occlusion of holograms enhances the sense that holograms really exist within the user's physical space.</span></span>
   * <span data-ttu-id="af3c5-282">Para habilitar a renderização de profundidade, atualize seu estado do blend para definir a [RenderTargetWriteMask](https://msdn.microsoft.com/library/windows/desktop/hh404492(v=vs.85).aspx) como zero para a cor de todos os destinos de renderização.</span><span class="sxs-lookup"><span data-stu-id="af3c5-282">To enable depth-only rendering, update your blend state to set the [RenderTargetWriteMask](https://msdn.microsoft.com/library/windows/desktop/hh404492(v=vs.85).aspx) to zero for all color render targets.</span></span>
* <span data-ttu-id="af3c5-283">Para modificar a aparência de hologramas obstruídos pelo superfícies do mundo real</span><span class="sxs-lookup"><span data-stu-id="af3c5-283">For modifying the appearance of holograms occluded by real-world surfaces</span></span>
   * <span data-ttu-id="af3c5-284">Geometria normalmente renderizada é ocultada quando ele é obstruído.</span><span class="sxs-lookup"><span data-stu-id="af3c5-284">Normally rendered geometry is hidden when it is occluded.</span></span> <span data-ttu-id="af3c5-285">Isso é feito definindo-se a função de profundidade no seu [estado de estêncil de profundidade](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx) para "menor que ou igual", que faz com que a geometria a ser visível apenas quando são **mais próximo** para a câmera que todos processado anteriormente geometria.</span><span class="sxs-lookup"><span data-stu-id="af3c5-285">This is achieved by setting the depth function in your [depth-stencil state](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx) to "less than or equal", which causes geometry to be visible only where it is **closer** to the camera than all previously rendered geometry.</span></span>
   * <span data-ttu-id="af3c5-286">No entanto, pode ser útil para manter certa geometria visíveis mesmo quando ele é obstruído e modificar sua aparência quando obstruídos como uma maneira de fornecer comentários visuais ao usuário.</span><span class="sxs-lookup"><span data-stu-id="af3c5-286">However, it may be useful to keep certain geometry visible even when it is occluded, and to modify its appearance when occluded as a way of providing visual feedback to the user.</span></span> <span data-ttu-id="af3c5-287">Por exemplo, isso permite que o aplicativo para mostrar o usuário o local de um objeto ao mesmo tempo, deixando claro que está por trás de uma superfície do mundo real.</span><span class="sxs-lookup"><span data-stu-id="af3c5-287">For example, this allows the application to show the user the location of an object whilst making it clear that is behind a real-world surface.</span></span>
   * <span data-ttu-id="af3c5-288">Para fazer isso, renderizar a geometria de uma segunda vez com um sombreador diferente que cria a aparência desejada de 'occluded'.</span><span class="sxs-lookup"><span data-stu-id="af3c5-288">To achieve this, render the geometry a second time with a different shader that creates the desired 'occluded' appearance.</span></span> <span data-ttu-id="af3c5-289">Antes de renderizar a geometria pela segunda vez, faça duas alterações para seu [estado de estêncil de profundidade](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="af3c5-289">Before rendering the geometry for the second time, make two changes to your [depth-stencil state](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span></span> <span data-ttu-id="af3c5-290">Primeiro, defina a função de profundidade para "maior que ou igual" para que a geometria estará visível apenas quando ele for **ainda mais** da câmera que geometria anteriormente renderizada todos os.</span><span class="sxs-lookup"><span data-stu-id="af3c5-290">First, set the depth function to "greater than or equal" so that the geometry will be visible only where it is **further** from the camera than all previously rendered geometry.</span></span> <span data-ttu-id="af3c5-291">Em segundo lugar, defina o DepthWriteMask como zero, para que o buffer de profundidade não será modificado (o buffer de profundidade deve continuar representar a profundidade da geometria **mais próximo** à câmera).</span><span class="sxs-lookup"><span data-stu-id="af3c5-291">Second, set the DepthWriteMask to zero, so that the depth buffer will not be modified (the depth buffer should continue to represent the depth of the geometry **closest** to the camera).</span></span>

<span data-ttu-id="af3c5-292">[Desempenho](understanding-performance-for-mixed-reality.md) é uma preocupação importante durante a renderização de malhas de mapeamento espacial.</span><span class="sxs-lookup"><span data-stu-id="af3c5-292">[Performance](understanding-performance-for-mixed-reality.md) is an important concern when rendering spatial mapping meshes.</span></span> <span data-ttu-id="af3c5-293">Estas são algumas técnicas de desempenho de renderização específico à renderização de malhas de mapeamento espacial:</span><span class="sxs-lookup"><span data-stu-id="af3c5-293">Here are some rendering performance techniques specific to rendering spatial mapping meshes:</span></span>
* <span data-ttu-id="af3c5-294">Ajustar a densidade de triângulo</span><span class="sxs-lookup"><span data-stu-id="af3c5-294">Adjust triangle density</span></span>
   * <span data-ttu-id="af3c5-295">Quando o solicitante superfície espacial malhas de sua superfície observador, solicite a menor densidade de malhas de triângulos que será suficiente para suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="af3c5-295">When requesting spatial surface meshes from your surface observer, request the lowest density of triangle meshes that will suffice for your needs.</span></span>
   * <span data-ttu-id="af3c5-296">Talvez faça sentido para variar a densidade de triângulo em uma base de superfície a superfície, dependendo da distância de superfície do usuário e sua relevância para a experiência do usuário.</span><span class="sxs-lookup"><span data-stu-id="af3c5-296">It may make sense to vary triangle density on a surface by surface basis, depending on the surface's distance from the user, and its relevance to the user experience.</span></span>
   * <span data-ttu-id="af3c5-297">Contagens de triângulo reduzindo reduzirá o uso de memória e os custos de processamento de vértice no GPU, embora isso não afetará os custos de processamento de pixel.</span><span class="sxs-lookup"><span data-stu-id="af3c5-297">Reducing triangle counts will reduce memory usage and vertex processing costs on the GPU, though it will not affect pixel processing costs.</span></span>
* <span data-ttu-id="af3c5-298">Executar frustum traseira</span><span class="sxs-lookup"><span data-stu-id="af3c5-298">Perform frustum culling</span></span>
   * <span data-ttu-id="af3c5-299">Frustum traseira ignora os objetos de desenho que não podem ser vistos porque eles estão fora de frustum de exibição atual.</span><span class="sxs-lookup"><span data-stu-id="af3c5-299">Frustum culling skips drawing objects that cannot be seen because they are outside the current display frustum.</span></span> <span data-ttu-id="af3c5-300">Isso reduz os custos de processamento de CPU e GPU.</span><span class="sxs-lookup"><span data-stu-id="af3c5-300">This reduces both CPU and GPU processing costs.</span></span>
   * <span data-ttu-id="af3c5-301">Como traseira é executada em uma base por malha e superfícies espaciais podem ser grandes, dividir cada malha superfície espacial em partes menores pode resultar na seleção mais eficiente (que são renderizados menos triângulos fora da tela).</span><span class="sxs-lookup"><span data-stu-id="af3c5-301">Since culling is performed on a per-mesh basis and spatial surfaces can be large, breaking each spatial surface mesh into smaller chunks may result in more efficient culling (in that fewer offscreen triangles are rendered).</span></span> <span data-ttu-id="af3c5-302">Há uma compensação, no entanto; as malhas mais que você tem, as mais chamadas de desenho deve fazer, que podem aumentar os custos de CPU.</span><span class="sxs-lookup"><span data-stu-id="af3c5-302">There is a tradeoff, however; the more meshes you have, the more draw calls you must make, which can increase CPU costs.</span></span> <span data-ttu-id="af3c5-303">Em casos extremos, a frustum traseira cálculos próprios poderia ter um custo de CPU mensurável.</span><span class="sxs-lookup"><span data-stu-id="af3c5-303">In an extreme case, the frustum culling calculations themselves could even have a measurable CPU cost.</span></span>
* <span data-ttu-id="af3c5-304">Ajustar a ordem de renderização</span><span class="sxs-lookup"><span data-stu-id="af3c5-304">Adjust rendering order</span></span>
   * <span data-ttu-id="af3c5-305">Superfícies espaciais tendem a ser grandes, porque eles representam todo o ambiente do usuário ao redor deles.</span><span class="sxs-lookup"><span data-stu-id="af3c5-305">Spatial surfaces tend to be large, because they represent the user's entire environment surrounding them.</span></span> <span data-ttu-id="af3c5-306">Os custos na GPU de processamento de pixel, portanto, pode ser alto, especialmente em casos onde há mais de uma camada de geometria visível (incluindo superfícies espaciais e outras hologramas).</span><span class="sxs-lookup"><span data-stu-id="af3c5-306">Pixel processing costs on the GPU can thus be high, especially in cases where there is more than one layer of visible geometry (including both spatial surfaces and other holograms).</span></span> <span data-ttu-id="af3c5-307">Nesse caso, a camada mais próximo do usuário será ser occluding ainda mais as camadas cara, portanto, qualquer GPU desperdiçar um tempo gasto na renderização essas camadas mais distantes.</span><span class="sxs-lookup"><span data-stu-id="af3c5-307">In this case, the layer nearest to the user will be occluding any layers further away, so any GPU time spent rendering those more distant layers is wasted.</span></span>
   * <span data-ttu-id="af3c5-308">Para reduzir esse trabalho redundante na GPU, ele ajuda a renderizar superfícies opacas na ordem de frente para trás (mais próximo que aqueles em primeiro lugar, mais distantes da última).</span><span class="sxs-lookup"><span data-stu-id="af3c5-308">To reduce this redundant work on the GPU, it helps to render opaque surfaces in front-to-back order (closer ones first, more distant ones last).</span></span> <span data-ttu-id="af3c5-309">Por 'opaco', queremos dizer superfícies para o qual o DepthWriteMask é definido como um em sua [estado de estêncil de profundidade](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="af3c5-309">By 'opaque' we mean surfaces for which the DepthWriteMask is set to one in your [depth-stencil state](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span></span> <span data-ttu-id="af3c5-310">Quando são processadas as superfícies mais próximos, elas comandarão o buffer de profundidade, de modo que mais distantes superfícies com eficiência são ignoradas pelo processador de pixel na GPU.</span><span class="sxs-lookup"><span data-stu-id="af3c5-310">When the nearest surfaces are rendered, they will prime the depth buffer so that more distant surfaces are efficiently skipped by the pixel processor on the GPU.</span></span>

## <a name="mesh-processing"></a><span data-ttu-id="af3c5-311">Processamento de malha</span><span class="sxs-lookup"><span data-stu-id="af3c5-311">Mesh Processing</span></span>

<span data-ttu-id="af3c5-312">Um aplicativo talvez queira realizar [várias operações](spatial-mapping.md#mesh-processing) em malhas de superfície espaciais para atender às suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="af3c5-312">An application may want to perform [various operations](spatial-mapping.md#mesh-processing) on spatial surface meshes to suit its needs.</span></span> <span data-ttu-id="af3c5-313">Os dados de índice e vértice fornecidos com cada malha superfície espacial usam o mesmo layout familiar como o [buffers de índice e vértice](https://msdn.microsoft.com/library/windows/desktop/bb147325%28v=vs.85%29.aspx) que são usadas para renderizar as malhas de triângulos em todas as APIs de renderização moderno.</span><span class="sxs-lookup"><span data-stu-id="af3c5-313">The index and vertex data provided with each spatial surface mesh uses the same familiar layout as the [vertex and index buffers](https://msdn.microsoft.com/library/windows/desktop/bb147325%28v=vs.85%29.aspx) that are used for rendering triangle meshes in all modern rendering APIs.</span></span> <span data-ttu-id="af3c5-314">No entanto, fatos principais a serem consideradas é que os triângulos de mapeamento espacial tem um **front-no sentido horário Enrolamento ordem**.</span><span class="sxs-lookup"><span data-stu-id="af3c5-314">However, one key fact to be aware of is that spatial mapping triangles have a **front-clockwise winding order**.</span></span> <span data-ttu-id="af3c5-315">Cada triângulo é representado por três índices de vértice no buffer de índices da malha e esses índices identificará os vértices do triângulo em uma **no sentido horário** ordem, quando o triângulo é visualizado a partir de **front** lado.</span><span class="sxs-lookup"><span data-stu-id="af3c5-315">Each triangle is represented by three vertex indices in the mesh's index buffer and these indices will identify the triangle's vertices in a **clockwise** order, when the triangle is viewed from the **front** side.</span></span> <span data-ttu-id="af3c5-316">Frente lado (ou externa) de malhas de superfície espaciais corresponde a como você esperaria, ao lado frontal (visível) das superfícies do mundo real.</span><span class="sxs-lookup"><span data-stu-id="af3c5-316">The front side (or outside) of spatial surface meshes corresponds as you would expect to the front (visible) side of real world surfaces.</span></span>

<span data-ttu-id="af3c5-317">Aplicativos devem ser executadas somente se a densidade de triângulo mais simples fornecida pelo observador superfície for ainda suficientemente grosseiro, esse trabalho é dispendioso em termos de simplificação de malha e já que está sendo executada pelo tempo de execução para gerar os vários níveis de detalhe de fornecido.</span><span class="sxs-lookup"><span data-stu-id="af3c5-317">Applications should only perform mesh simplification if the coarsest triangle density provided by the surface observer is still insufficiently coarse - this work is computationally expensive and already being performed by the runtime to generate the various provided levels of detail.</span></span>

<span data-ttu-id="af3c5-318">Porque cada observador superfície pode fornecer várias superfícies espaciais desconectadas, alguns aplicativos talvez queiram Recortar esses espacial superfície malhas em relação a cada outro, em seguida, compactador-los juntos.</span><span class="sxs-lookup"><span data-stu-id="af3c5-318">Because each surface observer can provide multiple unconnected spatial surfaces, some applications may wish to clip these spatial surface meshes against each other, then zipper them together.</span></span> <span data-ttu-id="af3c5-319">Em geral, a etapa de recorte é necessária, como nas proximidades de malhas de superfície espaciais geralmente se sobrepõem um pouco.</span><span class="sxs-lookup"><span data-stu-id="af3c5-319">In general, the clipping step is required, as nearby spatial surface meshes often overlap slightly.</span></span>

## <a name="raycasting-and-collision"></a><span data-ttu-id="af3c5-320">Raycasting e colisão</span><span class="sxs-lookup"><span data-stu-id="af3c5-320">Raycasting and Collision</span></span>

<span data-ttu-id="af3c5-321">Para que uma API física (como [Havok](http://www.havok.com/)) para fornecer um aplicativo com a funcionalidade de raycasting e colisão para superfícies espaciais, o aplicativo deve fornecer a superfície espacial malhas para a API de física.</span><span class="sxs-lookup"><span data-stu-id="af3c5-321">In order for a physics API (such as [Havok](http://www.havok.com/)) to provide an application with raycasting and collision functionality for spatial surfaces, the application must provide spatial surface meshes to the physics API.</span></span> <span data-ttu-id="af3c5-322">Malhas usadas para física geralmente têm as seguintes propriedades:</span><span class="sxs-lookup"><span data-stu-id="af3c5-322">Meshes used for physics often have the following properties:</span></span>
* <span data-ttu-id="af3c5-323">Elas contêm somente um pequeno número de triângulos.</span><span class="sxs-lookup"><span data-stu-id="af3c5-323">They contain only small numbers of triangles.</span></span> <span data-ttu-id="af3c5-324">Operações de física são mais intensos de computação que as operações de renderização.</span><span class="sxs-lookup"><span data-stu-id="af3c5-324">Physics operations are more computationally intensive than rendering operations.</span></span>
* <span data-ttu-id="af3c5-325">Eles são 'd'água-rígidas'.</span><span class="sxs-lookup"><span data-stu-id="af3c5-325">They are 'water-tight'.</span></span> <span data-ttu-id="af3c5-326">Superfícies que se destina a ser sólido não devem ter pequeno orifícios neles; até mesmo buracos muito pequenos para ser visível podem causar problemas.</span><span class="sxs-lookup"><span data-stu-id="af3c5-326">Surfaces intended to be solid should not have small holes in them; even holes too small to be visible can cause problems.</span></span>
* <span data-ttu-id="af3c5-327">Elas são convertidas em hulls convexos.</span><span class="sxs-lookup"><span data-stu-id="af3c5-327">They are converted into convex hulls.</span></span> <span data-ttu-id="af3c5-328">Hulls convexos têm alguns polígonos e são livres de brechas, e são computacionalmente muito mais eficientes para processar de malhas de triângulo bruto.</span><span class="sxs-lookup"><span data-stu-id="af3c5-328">Convex hulls have few polygons and are free of holes, and they are much more computationally efficient to process than raw triangle meshes.</span></span>

<span data-ttu-id="af3c5-329">Quando o desempenho raycasts contra espaciais superfícies, lembre-se de que estas superfícies costumam ser complexas, o desorganizado formas completos dos detalhes pouco confusos - apenas como sua mesa!</span><span class="sxs-lookup"><span data-stu-id="af3c5-329">When performing raycasts against spatial surfaces, bear in mind that these surfaces are often complex, cluttered shapes full of messy little details - just like your desk!</span></span> <span data-ttu-id="af3c5-330">Isso significa que um único raycast geralmente é insuficiente para lhe dar informações suficientes sobre a forma da superfície e a forma de espaço vazio próximo a ele.</span><span class="sxs-lookup"><span data-stu-id="af3c5-330">This means that a single raycast is often insufficient to give you enough information about the shape of the surface and the shape of the empty space near it.</span></span> <span data-ttu-id="af3c5-331">Ele é, portanto, geralmente uma boa ideia para realizar muitas raycasts dentro de uma área pequena e usar os resultados de agregação para derivar uma compreensão mais confiável da superfície.</span><span class="sxs-lookup"><span data-stu-id="af3c5-331">It is thus usually a good idea to perform many raycasts within a small area and to use the aggregate results to derive a more reliable understanding of the surface.</span></span> <span data-ttu-id="af3c5-332">Por exemplo, usando a média de 10 raycasts guia holograma posicionamento em uma superfície produzirá um resultado menor 'trêmulo' e muito mais suave que usando apenas um único raycast.</span><span class="sxs-lookup"><span data-stu-id="af3c5-332">For example, using the average of 10 raycasts to guide hologram placement on a surface will yield a far smoother and less 'jittery' result that using just a single raycast.</span></span>

<span data-ttu-id="af3c5-333">No entanto, tenha em mente que cada raycast pode ter um alto custo computacional.</span><span class="sxs-lookup"><span data-stu-id="af3c5-333">However, bear in mind that each raycast can have a high computational cost.</span></span> <span data-ttu-id="af3c5-334">Assim, dependendo do cenário de uso você deve compensar o custo computacional de raycasts adicionais (executada a cada quadro) contra o custo computacional da [processamento de malha](spatial-mapping.md#mesh-processing) suave e remover buracos em superfícies espacial ( executada quando as malhas espaciais são atualizadas).</span><span class="sxs-lookup"><span data-stu-id="af3c5-334">Thus depending on your usage scenario you should trade off the computational cost of additional raycasts (performed every frame) against the computational cost of [mesh processing](spatial-mapping.md#mesh-processing) to smooth and remove holes in spatial surfaces (performed when spatial meshes are updated).</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="af3c5-335">Solução de problemas</span><span class="sxs-lookup"><span data-stu-id="af3c5-335">Troubleshooting</span></span>
* <span data-ttu-id="af3c5-336">Para as malhas de superfície sejam corretamente na orientação, cada GameObject precisa estar ativo antes de serem enviado para o SurfaceObeserver ter sua malha construída.</span><span class="sxs-lookup"><span data-stu-id="af3c5-336">In order for the surface meshes to be orientated correctly, each GameObject needs to be active before it is sent to the SurfaceObeserver to have its mesh constructed.</span></span> <span data-ttu-id="af3c5-337">Caso contrário, as malhas aparecerão em seu espaço, mas girado em ângulos estranhos.</span><span class="sxs-lookup"><span data-stu-id="af3c5-337">Otherwise, the meshes will show up in your space but rotated at weird angles.</span></span>
* <span data-ttu-id="af3c5-338">O GameObject que executa o script que se comunica com o SurfaceObserver precisa ser definido para a origem.</span><span class="sxs-lookup"><span data-stu-id="af3c5-338">The GameObject that runs the script that communicates with the SurfaceObserver needs to be set to the origin.</span></span> <span data-ttu-id="af3c5-339">Caso contrário, todos os GameObjects que você crie e envie para o SurfaceObserver ter suas malhas construídas terá um deslocamento igual ao deslocamento do objeto pai do jogo.</span><span class="sxs-lookup"><span data-stu-id="af3c5-339">Otherwise, all of GameObjects that you create and send to the SurfaceObserver to have their meshes constructed will have an offset equal to the offset of the Parent Game Object.</span></span> <span data-ttu-id="af3c5-340">Isso pode tornar seu malhas aparecem várias metros de distância que torna muito difícil de depurar o que está acontecendo.</span><span class="sxs-lookup"><span data-stu-id="af3c5-340">This can make your meshes show up several meters away which makes it very hard to debug what is going on.</span></span>

## <a name="see-also"></a><span data-ttu-id="af3c5-341">Consulte também</span><span class="sxs-lookup"><span data-stu-id="af3c5-341">See also</span></span>
* [<span data-ttu-id="af3c5-342">Sistemas de coordenadas</span><span class="sxs-lookup"><span data-stu-id="af3c5-342">Coordinate systems</span></span>](coordinate-systems.md)
* [<span data-ttu-id="af3c5-343">Mapeamento espacial no DirectX</span><span class="sxs-lookup"><span data-stu-id="af3c5-343">Spatial mapping in DirectX</span></span>](spatial-mapping-in-directx.md)
* [<span data-ttu-id="af3c5-344">Mapeamento espacial no Unity</span><span class="sxs-lookup"><span data-stu-id="af3c5-344">Spatial mapping in Unity</span></span>](spatial-mapping-in-unity.md)
* [<span data-ttu-id="af3c5-345">Design de mapeamento espacial</span><span class="sxs-lookup"><span data-stu-id="af3c5-345">Spatial mapping design</span></span>](spatial-mapping-design.md)
* [<span data-ttu-id="af3c5-346">Estudo de caso - examinando buracos na sua realidade</span><span class="sxs-lookup"><span data-stu-id="af3c5-346">Case study - Looking through holes in your reality</span></span>](case-study-looking-through-holes-in-your-reality.md)
