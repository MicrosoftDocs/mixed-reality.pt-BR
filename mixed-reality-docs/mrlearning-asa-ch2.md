---
title: Tutoriais de âncoras espaciais do Azure-2. Salvando, recuperando e compartilhando âncoras espaciais do Azure
description: Conclua este curso para saber como implementar o reconhecimento facial do Azure em um aplicativo de realidade misturada.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: realidade misturada, unity, tutorial, hololens
ms.openlocfilehash: d03579bf04081f3729baa7d8d76d92586a416184
ms.sourcegitcommit: 83698638b93c5ba77b3ffc399f1706482539f27b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/26/2019
ms.locfileid: "74539707"
---
# <a name="2-saving-retrieving-and-sharing-azure-spatial-anchors"></a><span data-ttu-id="b9e6b-105">2. salvando, recuperando e compartilhando âncoras espaciais do Azure</span><span class="sxs-lookup"><span data-stu-id="b9e6b-105">2. Saving, retrieving, and sharing Azure Spatial Anchors</span></span>

<span data-ttu-id="b9e6b-106">Neste tutorial, você aprenderá a salvar nossas âncoras espaciais do Azure em várias sessões de aplicativo salvando nossas informações de âncora no armazenamento do HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-106">In this tutorial, you will learn how to save our Azure Spatial Anchors across multiple app sessions by saving our anchor information to the HoloLens 2's storage.</span></span> <span data-ttu-id="b9e6b-107">Você também aprenderá como compartilhar essas informações de âncora para outros dispositivos para um alinhamento de âncora de vários dispositivos.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-107">You will also learn how to share this anchor information to other devices for a multi-device anchor alignment.</span></span>

## <a name="objectives"></a><span data-ttu-id="b9e6b-108">Objetivos</span><span class="sxs-lookup"><span data-stu-id="b9e6b-108">Objectives</span></span>

* <span data-ttu-id="b9e6b-109">Saiba como salvar e recuperar informações de âncora espacial do Azure do disco local do HoloLens 2, para persistência entre sessões de aplicativo</span><span class="sxs-lookup"><span data-stu-id="b9e6b-109">Learn how to save and retrieve Azure Spatial Anchor information from the HoloLens 2 local disk, for persistence between app sessions</span></span>

* <span data-ttu-id="b9e6b-110">Saiba como compartilhar informações de âncora espacial do Azure entre usuários em um cenário de vários dispositivos</span><span class="sxs-lookup"><span data-stu-id="b9e6b-110">Learn how to share Azure Spatial Anchor information between users in a multi-device scenario</span></span>

## <a name="instructions"></a><span data-ttu-id="b9e6b-111">Instruções</span><span class="sxs-lookup"><span data-stu-id="b9e6b-111">Instructions</span></span>

### <a name="persist-azure-anchors-between-app-sessions---save-anchor-id-to-disk"></a><span data-ttu-id="b9e6b-112">Persistir âncoras do Azure entre sessões de aplicativo-salvar ID de âncora em disco</span><span class="sxs-lookup"><span data-stu-id="b9e6b-112">Persist Azure anchors between app sessions - Save anchor ID to Disk</span></span>

1. <span data-ttu-id="b9e6b-113">Pesquise e adicione o SaveAnchorToDisk pré-fabricado à sua cena.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-113">Search for and add the SaveAnchorToDisk prefab to your scene.</span></span> <span data-ttu-id="b9e6b-114">Eles incluem dois botões; um botão para salvar quaisquer IDs de âncora do Azure disponíveis no armazenamento do HoloLens 2 e outro para recuperar qualquer ID do disco.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-114">These include two buttons; one button for saving any available Azure Anchor IDs to the HoloLens 2 storage, and another for retrieving any IDs from the disk.</span></span>

![module2chapter2step1im](images/module2chapter2step1im.PNG)

2. <span data-ttu-id="b9e6b-116">Configure cada botão de acordo com as instruções abaixo</span><span class="sxs-lookup"><span data-stu-id="b9e6b-116">Configure Each button according to the instructions below</span></span>

   - <span data-ttu-id="b9e6b-117">Para o botão chamado SaveToDisk, crie um novo evento sob o botão pressionado evento acionado, bem como o gatilho de evento on Click.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-117">For the Button named SaveToDisk, create a new event under the Button Pressed event trigger as well as the On Click event trigger.</span></span> <span data-ttu-id="b9e6b-118">Arraste o objeto ParentAnchor para o campo vazio e atribua o método SaveAzureAnchorIDToDisk () do componente ASAmoduleScript do objeto ParentAnchor.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-118">Drag the ParentAnchor object into the empty field, and assign the SaveAzureAnchorIDToDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>
   
     > <span data-ttu-id="b9e6b-119">Observação: alguns dos botões podem aparecer sobrepondo os outros botões na cena.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-119">Note: some of the buttons may appear overlapping the other buttons in the scene.</span></span> <span data-ttu-id="b9e6b-120">Fique à vontade para ajustar o posicionamento do botão.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-120">Feel free to adjust the button's positioning.</span></span>

![module2chapter2step2aim](images/module2chapter2step2aim.PNG)

![module2chapter2step2aim](images/module2chapter2step2bim.PNG)

![module2chapter2step2aim](images/module2chapter2step2cim.PNG)


   - <span data-ttu-id="b9e6b-124">Para o botão chamado GetFromDisk, crie um novo evento no gatilho de evento pressionado por botão, bem como o gatilho de evento on Click.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-124">For the button named GetFromDisk, create a new event under the Button Pressed event trigger, as well as the On Click event trigger.</span></span> <span data-ttu-id="b9e6b-125">Arraste o objeto ParentAnchor para o campo vazio e atribua o método LoadAzureAnchorIDsFromDisk () do componente ASAmoduleScript do objeto ParentAnchor.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-125">Drag the ParentAnchor object into the empty field, and assign the LoadAzureAnchorIDsFromDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="b9e6b-126">Siga as instruções do tutorial 1 para criar o aplicativo atualizado para seu dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-126">Follow the instructions from Tutorial 1 to build the updated application to your device.</span></span> <span data-ttu-id="b9e6b-127">Depois de pressionar o botão criar âncora do Azure, como fez na lição anterior, você pode salvar a ID de âncora do Azure em disco pressionando o botão salvar em disco.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-127">After pressing the Create Azure Anchor button, as you did in the previous lesson, you may now save the Azure Anchor ID to disk by pressing the save to disk button.</span></span>

4. <span data-ttu-id="b9e6b-128">Reinicie o aplicativo, inicie a sessão do Azure, pressione carregar ID de âncora e, em seguida, pressione localizar âncora do Azure para localizar a âncora associada à ID salva no disco.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-128">Restart the application, start the Azure Session, Press Load Anchor ID, and then press Locate Azure Anchor to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="b9e6b-129">A cena inteira agora deve se ajustar à posição, no local em que você salvou a âncora anteriormente!</span><span class="sxs-lookup"><span data-stu-id="b9e6b-129">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

### <a name="share-azure-anchors-between-multiple-devices"></a><span data-ttu-id="b9e6b-130">Compartilhar âncoras do Azure entre vários dispositivos</span><span class="sxs-lookup"><span data-stu-id="b9e6b-130">Share Azure Anchors between multiple devices</span></span>

<span data-ttu-id="b9e6b-131">Nesta seção, aprenderemos como compartilhar a ID de âncora do Azure entre vários dispositivos.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-131">In this section, we'll learn how to share the Azure Anchor ID between multiple devices.</span></span> <span data-ttu-id="b9e6b-132">Isso permitirá que vários dispositivos consultem o Azure para a mesma ID de âncora, permitindo que nossos hologramas ancorados e cenas sejam alinhados espacialmente.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-132">This will allow multiple devices to query Azure for the same anchor ID, allowing our anchored holograms and scenes to be spatially aligned.</span></span> <span data-ttu-id="b9e6b-133">O alinhamento espacial (Ver os mesmos hologramas no mesmo local físico entre vários dispositivos) é a chave para experiências compartilhadas locais no HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-133">Spatial alignment (seeing the same holograms in the same physical location between multiple devices) is key to local shared experiences in the HoloLens 2.</span></span> <span data-ttu-id="b9e6b-134">Há várias maneiras de transferir informações sobre as IDs do Azure entre os dispositivos, incluindo métodos descritos nos [tutoriais](mrlearning-sharing(photon)-ch1.md)de tutoriais de experiências compartilhadas do Azure.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-134">There are many ways to transfer information regarding azure IDs between devices, including methods outlined in the Azure Spatial Anchors shared experiences tutorials [Tutorials](mrlearning-sharing(photon)-ch1.md).</span></span> <span data-ttu-id="b9e6b-135">Este exemplo usa um serviço Web simples para carregar e baixar IDs de âncora entre dispositivos.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-135">This example uses a simple web service to upload and download Anchor IDs between devices.</span></span>

1. <span data-ttu-id="b9e6b-136">Adicione o ShareAnchor pré-fabricado à sua hierarquia.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-136">Add the ShareAnchor prefab into your hierarchy.</span></span> <span data-ttu-id="b9e6b-137">Este pré-fabricado adiciona dois novos botões à sua cena; uma para carregar informações de ID de âncora e outra para baixar informações de ID de âncora.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-137">This prefab adds two new buttons to your scene; one for uploading anchor ID information and another for downloading anchor ID information.</span></span> 

![module2chapter2step5im](images/module2chapter2step5im.PNG)

2. <span data-ttu-id="b9e6b-139">Configure cada botão de acordo com as instruções abaixo</span><span class="sxs-lookup"><span data-stu-id="b9e6b-139">Configure Each button according to the instructions below</span></span>

   - <span data-ttu-id="b9e6b-140">Para o botão chamado SendSharedAnchor, crie um novo evento no gatilho de evento pressionado por botão, bem como o gatilho de evento on Click.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-140">For the Button named SendSharedAnchor, create a new event under the Button Pressed event trigger, as well as the On Click event trigger.</span></span> <span data-ttu-id="b9e6b-141">Arraste o objeto ParentAnchor para o campo vazio e atribua o método ShareAnchor () do componente ASAmoduleScript do objeto ParentAnchor.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-141">Drag the ParentAnchor object into the empty field, and assign the ShareAnchor() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

![module2chapter2step6aim](images/module2chapter2step6aim.PNG)

![module2chapter2step6bim](images/module2chapter2step6bim.PNG)

   - <span data-ttu-id="b9e6b-144">Para o botão chamado GetSharedAnchor, crie um novo evento no gatilho de evento pressionado por botão, bem como o gatilho de evento on Click.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-144">For the Button named GetSharedAnchor, create a new event under the Button Pressed event trigger, as well as the On Click event trigger.</span></span> <span data-ttu-id="b9e6b-145">Arraste o objeto ParentAnchor para o campo vazio e atribua o método GetSharedAzureAnchor () do componente ASAmoduleScript do objeto ParentAnchor.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-145">Drag the ParentAnchor object into the empty field, and assign the GetSharedAzureAnchor() method from the ParentAnchor object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="b9e6b-146">Siga as instruções do [tutorial 1](mrlearning-base-ch1.md) para criar o aplicativo atualizado para seu dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-146">Follow the instructions from [Tutorial 1](mrlearning-base-ch1.md) to build the updated application to your device.</span></span> <span data-ttu-id="b9e6b-147">Depois de pressionar o botão criar âncora do Azure, como você fez na lição anterior, você pode compartilhar a ID de âncora do Azure para outros dispositivos pressionando o botão compartilhar para outro dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-147">After pressing the Create Azure Anchor button, as you did in the previous lesson, you may now share the Azure Anchor ID to other devices by pressing the Share To Other Device button.</span></span>

   > <span data-ttu-id="b9e6b-148">Observação: selecione a âncora pai e role para baixo até o script de âncora pai.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-148">Note: Select the parent anchor and scroll down to the parent anchor script.</span></span> <span data-ttu-id="b9e6b-149">Verifique se seu PIN de compartilhamento público é exclusivo (você pode alterar o PIN para outro número), para que, ao compartilhá-lo, você saiba que ele é seu que você está compartilhando.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-149">Ensure that your public sharing pin is unique (You can change the pin to another number), so that when you share it, you know it is yours that you are sharing.</span></span> <span data-ttu-id="b9e6b-150">Pode haver milhares de usuários compartilhando suas âncoras do Azure, portanto, fazer isso permitirá que você esteja compartilhando as âncoras do Azure corretas.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-150">There could be thousands of users sharing their Azure anchors, so doing this will allow you to ensure you are sharing the correct Azure anchors.</span></span>
   > 

![module2chapter2step7bim](images/module2chapter2step7bim.PNG)

4. <span data-ttu-id="b9e6b-152">Se você tiver outro dispositivo HoloLens 2, inicie o aplicativo e inicie a sessão do Azure.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-152">If you have another HoloLens 2 device, start the application and then start the Azure Session.</span></span> <span data-ttu-id="b9e6b-153">Pressione o botão obter ID de âncora compartilhada e, em seguida, pressione o botão Localizar âncora do Azure para localizar a âncora associada à ID que compartilhamos usando o serviço Web.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-153">Press the Get Shared Anchor ID button, and then press the Locate Azure Anchor button to locate the anchor associated with the ID we shared using the web service.</span></span> <span data-ttu-id="b9e6b-154">A cena inteira agora deve se ajustar à posição, em que foi colocada no outro dispositivo de HoloLens 2!</span><span class="sxs-lookup"><span data-stu-id="b9e6b-154">The entire scene should now snap into position, at where it was placed on the other HoloLens 2 device!</span></span> <span data-ttu-id="b9e6b-155">Se você tiver apenas um HoloLens 2, ainda poderá testar a funcionalidade reiniciando o aplicativo, iniciando a sessão do Azure e, em seguida, pressionando o botão "obter ID de âncora compartilhada", seguido pelo "Localizar botão de âncora do Azure" para localizar a âncora associada à ID que nós salvo no disco.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-155">If you only have one HoloLens 2, you may still test functionality by restarting the application, starting the Azure Session, and then press the "Get Shared Anchor ID" button, followed by the "Locate Azure Anchor button" to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="b9e6b-156">A cena inteira agora deve se ajustar à posição, no local em que você salvou a âncora anteriormente!</span><span class="sxs-lookup"><span data-stu-id="b9e6b-156">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

## <a name="congratulations"></a><span data-ttu-id="b9e6b-157">Parabéns</span><span class="sxs-lookup"><span data-stu-id="b9e6b-157">Congratulations</span></span>
<span data-ttu-id="b9e6b-158">Nesta lição, você aprendeu como persistir as âncoras espaciais do Azure entre as sessões do aplicativo e reinicializações do aplicativo salvando a ID de âncora espacial do Azure no disco local no HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-158">In this Lesson you learned how to persist Azure Spatial Anchors between application sessions and application restarts by saving the Azure Spatial Anchor ID to the local disk on HoloLens 2.</span></span> <span data-ttu-id="b9e6b-159">Você também aprendeu a compartilhar as âncoras espaciais do Azure entre vários dispositivos para uma experiência compartilhada básica com vários usuários e com holograma estático.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-159">You also learned how to share Azure Spatial Anchors between multiple devices for a basic multi-user, static hologram shared experience.</span></span>

<span data-ttu-id="b9e6b-160">Aprendemos como implementar âncoras espaciais do Azure como parte de uma experiência compartilhada local totalmente interativa durante a lição final do módulo de compartilhamento.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-160">We learn how to implement Azure Spatial Anchors as part of a fully-interactive local shared experience during the final lesson of the Sharing Module.</span></span> <span data-ttu-id="b9e6b-161">Uma experiência de compartilhamento local pode incluir funcionalidades como a posição de objeto 3D sincronizada, rotação e escala, identificadores para cada usuário e Estados de aplicativos compartilhados.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-161">A local sharing experience may include functionality such as synchronized 3D object position, rotation, and scale, identifiers for each user, and shared application states.</span></span> <span data-ttu-id="b9e6b-162">As âncoras espaciais do Azure aprimoram esses cenários compartilhados, fornecendo a cada participante uma âncora comum que permite que todos os usuários vejam objetos virtuais no mesmo local físico.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-162">Azure Spatial Anchors enhances these shared scenarios by providing each participant with a common anchor that lets all users see virtual objects in the same physical location.</span></span> <span data-ttu-id="b9e6b-163">Isso é verdadeiro em uma variedade de plataformas de dispositivo, incluindo o HoloLens, Android e dispositivos iOS.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-163">This is true across a range of device platforms, including HoloLens, Android, and iOS devices.</span></span> <span data-ttu-id="b9e6b-164">Para saber como desenvolver uma experiência compartilhada, conclua todas as lições no módulo de compartilhamento.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-164">To learn how to develop a shared experience, complete all lessons in the Sharing module.</span></span>

<span data-ttu-id="b9e6b-165">Na próxima lição, você aprenderá a fornecer aos usuários comentários em tempo real.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-165">In the next Lesson, you will learn how to provide users with real-time feedback.</span></span> <span data-ttu-id="b9e6b-166">Esses comentários incluirão informações sobre a criação de âncora, a qualidade da compreensão do ambiente e o estado da sessão do Azure.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-166">This feedback will include information about Anchor creation, the quality of environment understanding, and the state of the Azure session.</span></span> <span data-ttu-id="b9e6b-167">Sem comentários, os usuários podem não saber se uma âncora foi carregada com êxito no Azure, se a qualidade do ambiente é suficiente para a criação de âncora ou para o estado atual.</span><span class="sxs-lookup"><span data-stu-id="b9e6b-167">Without feedback, users may not know whether an anchor has successfully been uploaded to Azure, whether the quality of the environment is sufficient for anchor creation, or the current state.</span></span>

[<span data-ttu-id="b9e6b-168">Próxima lição: 3. exibindo comentários de âncora espacial do Azure</span><span class="sxs-lookup"><span data-stu-id="b9e6b-168">Next Lesson: 3. Displaying Azure Spatial Anchor feedback</span></span>](mrlearning-asa-ch3.md)

